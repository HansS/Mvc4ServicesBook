<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
               namespace="MVC4ServicesBook.Data.Model"
               assembly="MVC4ServicesBook.Data"
               schema="dbo" >
    
    <class name="Task" table="Task">

        <id name="TaskId" type="Int64" unsaved-value="0">
          <generator class="identity"/>
        </id>

        <version name="Version" generated="always" unsaved-value="null" type="BinaryBlob" >
          <column name="ts" not-null="true" sql-type="rowversion"/>
        </version>
  
        <property name="Subject" not-null="true" type="string" />
        <property name="StartDate" not-null="false" type="DateTime" />
        <property name="DueDate" not-null="false" type="DateTime" />
        <property name="DateCompleted" not-null="false" type="DateTime" />
        <property name="CreatedDate" not-null="true" type="DateTime" />

        <many-to-one class="Status" name="Status" column="StatusId" />
        <many-to-one class="Priority" name="Priority" column="PriorityId" />
        <many-to-one class="User" name="CreatedBy" column="CreatedUserId" />
      
        <bag name="Users" table="TaskUser" access="nosetter.camelcase-underscore" >
          <key column="TaskId" />
          <many-to-many class="User" column="UserId" />
        </bag>
      
        <bag name="Categories" table="TaskCategory" access="nosetter.camelcase-underscore" >
          <key column="TaskId" />
          <many-to-many class="Category" column="CategoryId" />
        </bag>
            
    </class>
    
</hibernate-mapping>